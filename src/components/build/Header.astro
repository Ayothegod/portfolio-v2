---
import { Icon } from 'astro-icon/components'
import Link from '../ui/Link.astro';
import { Button } from '../ui/button';
---

<header class="flex justify-center">
  <div class="fixed inset-x-0 top-0 max-w-full mt-3 mx-4  p-20">
    <div>
      <Icon name="icons/Home - Fill"/>
      <Icon name="icons/Home - Outline"/>

      <Button id='darkModeToggle' variant="secondary">Toggle Mode</Button>
      <!-- <Link href='/' styles='underline text-3xl text-red-600' text="Homepage" icon='icons/LinkedIn' iconPosition='left'/> -->

    </div>
  </div>
</header>

<script>
  import {
    $toggleTheme,
    $applyTheme,
    $currentTheme,
    $setThemePreference,
  } from "../../store/theme";

  const themeToggleButton = document.getElementById("darkModeToggle");
  const html = document.querySelector("html");

  window.addEventListener("DOMContentLoaded", () => {
    const currentTheme = $currentTheme.get();

    if (currentTheme === null) {
      $setThemePreference("dark");
    }
    $applyTheme();
  });

  if (themeToggleButton) {
    themeToggleButton.addEventListener("click", () => {
      $toggleTheme();
    });
  }
</script>
